@model prjTravelPlatform_release.Areas.Customer.Model.Hotel.HotelSearchDTO
@{
    ViewData["Title"] = "飯店住宿";
}
@section Styles {
    <style>
        .selected {
            background-color: var(--color-blue-1);
            color: #fff
        }

        .pill {
            cursor: pointer;
        }

        .page-btn, .sort-btn {
            cursor: pointer
        }

            .page-btn, .sort-btn:hover {
                background-color: #F5F5F5;
            }

                .page-btn.selected, .sort-btn.selected {
                    background-color: #2f4f4f;
                    color: #fff;
                }

        .wishlist {
            background-color: var(--color-white);
        }

            .wishlist.wishlist-selected {
                background-color: #D93025;
                color: var(--color-light-3);
            }
    </style>
}

<!--上方搜尋欄-->
<section class="pt-40 pb-40 bg-light-2" style="margin-top: 90px">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="mainSearch -col-3-big bg-white px-20 py-20 lg:px-20 lg:pt-5 lg:pb-20 rounded-22 shadow-3">
                    <div class="button-grid items-center">

                        <!--目的地-->
                        <div class="searchMenu-loc pl-20 lg:py-20 lg:px-0">
                            <div>
                                <h4 class="text-15 fw-500 ls-2 lh-16">目的地或飯店名稱</h4>
                                <div class="text-18 ls-2 lh-16">
                                    <input asp-for="Destination" autocomplete="off" type="search" placeholder="地區/飯店名稱" class="fw-700" />
                                    <input type="hidden" asp-for="Category" />
                                </div>
                            </div>
                            <div class="searchMenu-loc__field shadow-1 popup-window rounded-22" style="max-height:450px; overflow: auto">
                                <div class="bg-white px-30 py-30 sm:px-0 sm:py-15 rounded-22" id="divFilter">
                                </div>
                            </div>
                        </div>
                        <!--日期-->
                        <div class="searchMenu-date px-30 lg:py-20 lg:px-0 js-form-dd js-calendar js-calendar-el">

                            <div data-x-dd-click="searchMenu-date">
                                <h4 class="text-15 fw-500 ls-2 lh-16">入住/退房日期</h4>

                                <div class="capitalize text-18 text-light-1 ls-2 lh-16">
                                    <span id="dateFilter" class="js-first-date fw-700">請選擇日期</span>
                                    <span class="js-last-date fw-700"></span>
                                </div>
                            </div>
                            <div class="searchMenu-date__field shadow-1 rounded-22" data-x-dd="searchMenu-date" data-x-dd-toggle="-is-active">
                                <div class="bg-white px-30 py-30 rounded-22">
                                    <div class="elCalendar js-calendar-el-calendar"></div>
                                </div>
                            </div>
                        </div>
                        <!--人數-->
                        <div class="searchMenu-guests px-30 lg:py-20 lg:px-0 js-form-dd js-form-counters">

                            <div data-x-dd-click="searchMenu-guests">
                                <h4 class="text-15 fw-500 ls-2 lh-16">人數及客房</h4>

                                <div class="text-18 text-light-1 ls-2 lh-16">
                                    <span class="js-count-adult fw-700">1</span>
                                    <span>人</span>
                                    <span class="js-count-room fw-700">1</span>
                                    <span>間客房</span>
                                </div>
                            </div>


                            <div class="searchMenu-guests__field shadow-1 rounded-22" data-x-dd="searchMenu-guests" data-x-dd-toggle="-is-active">
                                <div class="bg-white px-30 py-30 rounded-22">
                                    <!--人數-->
                                    <div class="row y-gap-10 justify-between items-center">
                                        <div class="col-auto">
                                            <div class="text-15 fw-500">人數</div>
                                        </div>
                                        <div class="col-auto">
                                            <div class="d-flex items-center js-counter" data-value-change=".js-count-adult">
                                                <button class="button -outline-blue-1 text-blue-1 size-38 rounded-4 js-down">
                                                    <i class="icon-minus text-12"></i>
                                                </button>

                                                <div class="flex-center size-20 ml-15 mr-15">
                                                    <div class="text-15 js-count">1</div>
                                                </div>

                                                <button class="button -outline-blue-1 text-blue-1 size-38 rounded-4 js-up">
                                                    <i class="icon-plus text-12"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="border-top-light mt-24 mb-24"></div>
                                    <!--房間-->
                                    <div class="row y-gap-10 justify-between items-center">
                                        <div class="col-auto">
                                            <div class="text-15 fw-500">房間</div>
                                        </div>
                                        <div class="col-auto">
                                            <div class="d-flex items-center js-counter" data-value-change=".js-count-room">
                                                <button class="button -outline-blue-1 text-blue-1 size-38 rounded-4 js-down">
                                                    <i class="icon-minus text-12"></i>
                                                </button>

                                                <div class="flex-center size-20 ml-15 mr-15">
                                                    <div class="text-15 js-count">1</div>
                                                </div>

                                                <button class="button -outline-blue-1 text-blue-1 size-38 rounded-4 js-up">
                                                    <i class="icon-plus text-12"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button id="btnSearch"
                                class="mainSearch__submit button -dark-1 py-15 px-40 col-12 rounded-22 bg-blue-1 text-white rounded-22"
                                onclick="sendRequest()">
                            <i class="icon-search text-20 mr-10"></i>
                            搜尋
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<section class="layout-pt-md layout-pb-lg">
    <div class="container">
        <div class="row y-gap-30">

            <!--side篩選條件-->
            <div class="col-xl-3 col-lg-4 lg:d-none">
                <aside class="sidebar y-gap-40">
                    <div class="sidebar__item -no-border">
                        <h5 class="text-18 fw-700 pt-15"><i class="fa-solid fa-filter"></i> 進階篩選</h5>
                    </div>
                    <!--價格-->
                    <div class="sidebar__item pb-30">
                        <h5 class="text-18 fw-500 mb-10">價格</h5>
                        <div class="row x-gap-10 y-gap-30">
                            <div class="col-12">
                                <div class="js-price-rangeSlider">
                                    <div class="text-14 fw-500"></div>
                                    <div class="d-flex justify-between mb-20">
                                        <div class="text-15 text-dark-1">
                                            <span class="js-lower"></span>
                                            -
                                            <span class="js-upper"></span>
                                        </div>
                                    </div>
                                    <div class="px-5">
                                        <div class="js-slider"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 d-flex justify-between mt-30">
                            <div class="col-9"></div>
                            <div class="col-3">
                                <button class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100" onclick="callback()">確定</button>
                            </div>
                        </div>
                    </div>

                    <!--星級-->
                    <div class="sidebar__item">
                        <h5 class="text-18 fw-500 mb-10">星等</h5>
                        <div class="row x-gap-10 y-gap-10 pt-10">

                            <div class="col-auto">
                                <a data-rank="2" href="" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">1</a>
                            </div>
                            <div class="col-auto">
                                <a data-rank="2" href="" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">2</a>
                            </div>
                            <div class="col-auto">
                                <a data-rank="3" href="" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">3</a>
                            </div>

                            <div class="col-auto">
                                <a data-rank="4" href="" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">4</a>
                            </div>
                            <div class="col-auto">
                                <a data-rank="5" href="" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">5</a>
                            </div>

                        </div>
                    </div>

                    <!--評分-->
                    <div class="sidebar__item">
                        <h5 class="text-18 fw-500 mb-10">評分</h5>
                        <div class="row x-gap-5 y-gap-10 pt-10">
                            <div class="col-auto">
                                <a data-score="4.5" href="" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">4.5+</a>
                            </div>
                            <div class="col-auto">
                                <a data-score="4" href="" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">4+</a>
                            </div>
                            <div class="col-auto">
                                <a data-score="3.5" href="" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">3.5+</a>
                            </div>
                        </div>
                    </div>
                    <!--設施篩選-->
                    <div class="sidebar__item">
                        <!--住宿類型-->
                        <div class="accordion -simple row y-gap-20 js-accordion mb-10">
                            <div class="col-12">
                                <div class="accordion__item px-10 py-20 border-light rounded-22">
                                    <div class="accordion__button d-flex items-center">
                                        <div class="accordion__icon size-40 flex-center bg-light-2 rounded-full mr-20">
                                            <i class="icon-plus"></i>
                                            <i class="icon-minus"></i>
                                        </div>
                                        <div class="button text-dark-1">住宿類型</div>
                                    </div>
                                    <div class="accordion__content">
                                        <div class="row x-gap-10 y-gap-10 pt-20" id="divHotelType">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--飯店設施-->
                        <div class="accordion -simple row y-gap-20 js-accordion mb-10">
                            <div class="col-12">
                                <div class="accordion__item px-10 py-20 border-light rounded-22">
                                    <div class="accordion__button d-flex items-center">
                                        <div class="accordion__icon size-40 flex-center bg-light-2 rounded-full mr-20">
                                            <i class="icon-plus"></i>
                                            <i class="icon-minus"></i>
                                        </div>
                                        <div class="button text-dark-1">飯店設施</div>
                                    </div>
                                    <div class="accordion__content">
                                        <div class="row x-gap-5 y-gap-10 pt-20" id="divHotelFacility">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--房間設施-->
                        <div class="accordion -simple row y-gap-20 js-accordion mb-10">
                            <div class="col-12">
                                <div class="accordion__item px-10 py-20 border-light rounded-22">
                                    <div class="accordion__button d-flex items-center">
                                        <div class="accordion__icon size-40 flex-center bg-light-2 rounded-full mr-20">
                                            <i class="icon-plus"></i>
                                            <i class="icon-minus"></i>
                                        </div>
                                        <div class="button text-dark-1">房間設施</div>
                                    </div>
                                    <div class="accordion__content">
                                        <div class="row x-gap-10 y-gap-10 pt-20" id="divRoomFacility">
                                            <div class="col-auto">
                                                <div class="border-light rounded-100 py-5 px-20 text-14 lh-14">test1123123</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>

            <!--主要內容--></>
            <div class="col-xl-9 col-lg-8">
                <div class="row y-gap-10 items-center justify-between">
                    <!--找到的資料筆數-->
                    <div class="col-auto">
                        <div class="row x-gap-20 y-gap-20">
                            <div class="col-auto">
                                <div class="text-18" id="spanHotelCount">
                                    <span class="fw-700"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--排序-->
                    <div class="col-auto">
                        <div class="row x-gap-20 y-gap-20">
                            <div class="col-auto">
                                <div class="dropdown js-dropdown priceFilter-active">
                                    <div class="dropdown__button sm:w-full" data-el-toggle=".priceFilter" data-el-toggle-active=".priceFilter-active">
                                        <button class="sort-btn dropdown__button button -blue-1 h-40 px-20 rounded-100 bg-blue-1-05 text-15 text-blue-1">
                                            <i class="icon-up-down text-14 mr-10"></i>
                                            價格 ( 從高到低 )
                                        </button>
                                    </div>
                                    <div class="toggle-element -dropdown  js-click-dropdown priceFilter">
                                        <div class="text-14 y-gap-15 js-dropdown-list">
                                            <a href="#" class="d-block" onclick="sortByFun(event, 'price', 'desc')">價格 ( 從高到低 ) </a>
                                            <a href="#" class="d-block" onclick="sortByFun(event, 'price', 'asc')">價格 ( 從低到高 ) </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="dropdown js-dropdown commentFilter-active">
                                    <div class="dropdown__button sm:w-full" data-el-toggle=".commentFilter" data-el-toggle-active=".commentFilter-active">
                                        <button class="sort-btn dropdown__button button -blue-1 h-40 px-20 rounded-100 bg-blue-1-05 text-15 text-blue-1">
                                            <i class="icon-up-down text-14 mr-10"></i>
                                            評價 ( 從高到低 )
                                        </button>
                                    </div>
                                    <div class="toggle-element -dropdown  js-click-dropdown commentFilter">
                                        <div class="text-14 y-gap-15 js-dropdown-list">
                                            <a href="#" class="d-block" onclick="sortByFun(event, 'comment', 'desc')">評價 ( 從高到低 ) </a>
                                            <a href="#" class="d-block" onclick="sortByFun(event, 'comment', 'asc')">評價 ( 從低到高 ) </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-auto d-none lg:d-block">
                                <button data-x-click="filterPopup" class="button -blue-1 h-40 px-20 rounded-100 bg-blue-1-05 text-15 text-blue-1">
                                    <i class="icon-up-down text-14 mr-10"></i>
                                    Filter
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="filterPopup bg-white" data-x="filterPopup" data-x-toggle="-is-active">
                    <aside class="sidebar -mobile-filter">
                        <div data-x-click="filterPopup" class="-icon-close">
                            <i class="icon-close"></i>
                        </div>

                        <div class="sidebar__item pb-30">
                            <h5 class="text-18 fw-500 mb-10">價格</h5>
                            <div class="row x-gap-10 y-gap-30">
                                <div class="col-12">
                                    <div class="js-price-rangeSlider">
                                        <div class="text-14 fw-500"></div>

                                        <div class="d-flex justify-between mb-20">
                                            <div class="text-15 text-dark-1">
                                                <span class="js-lower"></span>
                                                -
                                                <span class="js-upper"></span>
                                            </div>
                                        </div>

                                        <div class="px-5">
                                            <div class="js-slider"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="sidebar__item">
                            <h5 class="text-18 fw-500 mb-10">Deals</h5>
                            <div class="sidebar-checkbox">

                                <div class="row items-center justify-between">
                                    <div class="col-auto">
                                        <div class="d-flex items-center">
                                            <div class="form-checkbox">
                                                <input type="checkbox">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>
                                            <div class="text-15 ml-10">價格</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">
                                        <div class="d-flex items-center">
                                            <div class="form-checkbox">
                                                <input type="checkbox">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>
                                            <div class="text-15 ml-10">Reserve now, pay at stay </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">
                                        <div class="d-flex items-center">
                                            <div class="form-checkbox">
                                                <input type="checkbox">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>
                                            <div class="text-15 ml-10">Properties with special offers</div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="sidebar__item">
                            <h5 class="text-18 fw-500 mb-10">Popular Filters</h5>
                            <div class="sidebar-checkbox">

                                <div class="row items-center justify-between">
                                    <div class="col-auto">
                                        <div class="d-flex items-center">
                                            <div class="form-checkbox">
                                                <input type="checkbox">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>
                                            <div class="text-15 ml-10">Breakfast Included</div>
                                        </div>
                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">92</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">
                                        <div class="d-flex items-center">
                                            <div class="form-checkbox">
                                                <input type="checkbox">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>
                                            <div class="text-15 ml-10">Romantic</div>
                                        </div>
                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">45</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">
                                        <div class="d-flex items-center">
                                            <div class="form-checkbox">
                                                <input type="checkbox">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>
                                            <div class="text-15 ml-10">Airport Transfer</div>
                                        </div>
                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">21</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">
                                        <div class="d-flex items-center">
                                            <div class="form-checkbox">
                                                <input type="checkbox">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>
                                            <div class="text-15 ml-10">WiFi Included </div>
                                        </div>
                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">78</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">
                                        <div class="d-flex items-center">
                                            <div class="form-checkbox">
                                                <input type="checkbox">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>
                                            <div class="text-15 ml-10">5 Star</div>
                                        </div>
                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">679</div>
                                    </div>
                                </div>

                            </div>
                        </div>



                        <div class="sidebar__item">
                            <h5 class="text-18 fw-500 mb-10">Amenities</h5>
                            <div class="sidebar-checkbox">

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Breakfast Included</div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">92</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">WiFi Included </div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">45</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Pool</div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">21</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Restaurant </div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">78</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Air conditioning </div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">679</div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="sidebar__item">
                            <h5 class="text-18 fw-500 mb-10">Star Rating</h5>
                            <div class="row y-gap-10 x-gap-10 pt-10">

                                <div class="col-auto">
                                    <a href="#" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">1</a>
                                </div>

                                <div class="col-auto">
                                    <a href="#" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">2</a>
                                </div>

                                <div class="col-auto">
                                    <a href="#" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">3</a>
                                </div>

                                <div class="col-auto">
                                    <a href="#" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">4</a>
                                </div>

                                <div class="col-auto">
                                    <a href="#" class="button -blue-1 bg-blue-1-05 text-blue-1 py-5 px-20 rounded-100">5</a>
                                </div>

                            </div>
                        </div>

                        <div class="sidebar__item">
                            <h5 class="text-18 fw-500 mb-10">Guest Rating</h5>
                            <div class="sidebar-checkbox">

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="form-radio d-flex items-center ">
                                            <div class="radio">
                                                <input type="radio" name="name">
                                                <div class="radio__mark">
                                                    <div class="radio__icon"></div>
                                                </div>
                                            </div>
                                            <div class="ml-10">Any</div>
                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">92</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="form-radio d-flex items-center ">
                                            <div class="radio">
                                                <input type="radio" name="name">
                                                <div class="radio__mark">
                                                    <div class="radio__icon"></div>
                                                </div>
                                            </div>
                                            <div class="ml-10">Wonderful 4.5+</div>
                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">45</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="form-radio d-flex items-center ">
                                            <div class="radio">
                                                <input type="radio" name="name">
                                                <div class="radio__mark">
                                                    <div class="radio__icon"></div>
                                                </div>
                                            </div>
                                            <div class="ml-10">Very good 4+</div>
                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">21</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="form-radio d-flex items-center ">
                                            <div class="radio">
                                                <input type="radio" name="name">
                                                <div class="radio__mark">
                                                    <div class="radio__icon"></div>
                                                </div>
                                            </div>
                                            <div class="ml-10">Good 3.5+ </div>
                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">78</div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="sidebar__item">
                            <h5 class="text-18 fw-500 mb-10">Style</h5>
                            <div class="sidebar-checkbox">

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Budget</div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">92</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Mid-range </div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">45</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Luxury</div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">21</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Family-friendly </div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">78</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Business </div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">679</div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="sidebar__item">
                            <h5 class="text-18 fw-500 mb-10">Neighborhood</h5>
                            <div class="sidebar-checkbox">

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Central London</div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">92</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Guests&#39; favourite area </div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">45</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Westminster Borough</div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">21</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Kensington and Chelsea </div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">78</div>
                                    </div>
                                </div>

                                <div class="row items-center justify-between">
                                    <div class="col-auto">

                                        <div class="d-flex items-center">
                                            <div class="form-checkbox ">
                                                <input type="checkbox" name="name">
                                                <div class="form-checkbox__mark">
                                                    <div class="form-checkbox__icon icon-check"></div>
                                                </div>
                                            </div>

                                            <div class="text-15 ml-10">Oxford Street </div>

                                        </div>

                                    </div>

                                    <div class="col-auto">
                                        <div class="text-15 text-light-1">679</div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </aside>
                </div>

                <div class="mt-30"></div>

                <!--飯店卡片清單-->
                <div>
                    <div class="row y-gap-30" id="hotelCards">
                        <!--hotelCards顯示處!!!-->
                    </div>
                </div>

                <!--分頁-->
                <div class="border-top-light mt-30 pt-30" id="page">
                    <div class="row x-gap-10 y-gap-20 justify-center">
                        <div class="col-auto md:order-1">
                            <button class="button -blue-1 size-40 rounded-full border-light" onclick="pageMinus()">
                                <i class="icon-chevron-left text-12"></i>
                            </button>
                        </div>
                        <div class="col-md-auto md:order-3">
                            <div id="pageNum" class="row x-gap-10 y-gap-20 items-center justify-center md:d-none">
                                <!--頁數內容-->
                            </div>
                            <div class="row x-gap-10 y-gap-20 justify-center items-center d-none md:d-flex">
                                <div class="col-auto">
                                    <div class="size-40 flex-center rounded-full">1</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto md:order-2">
                            <button class="button -blue-1 size-40 rounded-full border-light" onclick="pagePlus()">
                                <i class="icon-chevron-right text-12"></i>
                            </button>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
</section>

@section Scripts {
    <script src="~/js/frontstage/v2/hotel/hotelsearchbar.js"></script>
    @* <script src="~/js/frontstage/v2/hotel/loadfiltertdata.js"></script> *@
    <script>
        const sessionStore = JSON.parse(sessionStorage.getItem('filter'));
        if (sessionStore.length != 0) {
            ipFilter.value = sessionStore.Destination;
            category.value = sessionStore.Category;
            startDate.textContent = sessionStore.StartDate + ' ' + '-';
            endDate.textContent = sessionStore.EndDate;
            person.textContent = sessionStore.PersonNum;
            room.textContent = sessionStore.RoomNum;
        }

        const rankBtns = document.querySelectorAll('a[data-rank]');
        const scoreBtns = document.querySelectorAll('a[data-score]');

        //星等
        rankBtns.forEach(button => {
            button.addEventListener('click', async (event) => {
                event.preventDefault();
                const rankValue = Number(button.getAttribute('data-rank'));

                if (button.classList.contains('selected')) {

                    button.classList.remove('selected');
                    const index = filterObj.Rank.indexOf(rankValue);
                    filterObj.Rank.splice(index, 1);
                    console.log(filterObj.Rank);
                    //移致畫面最上方
                    scrollToTop();
                    await sendRequest();
                    return;
                }
                button.classList.add('selected');
                filterObj.Rank.push(rankValue);
                console.log(filterObj.Rank);
                //移致畫面最上方
                scrollToTop();
                await sendRequest();
            })
        });

        //評分
        scoreBtns.forEach(button => {
            button.addEventListener('click', async (event) => {
                event.preventDefault();
                const scoreValue = Number(button.getAttribute('data-score'));

                if (button.classList.contains('selected')) {

                    button.classList.remove('selected');
                    const index = filterObj.Score.indexOf(scoreValue);
                    filterObj.Score.splice(index, 1);
                    console.log(filterObj.Score);
                    //移致畫面最上方
                    scrollToTop();
                    await sendRequest();
                    return;
                }
                button.classList.add('selected');
                filterObj.Score.push(scoreValue);
                console.log(filterObj.Score);
                await sendRequest();
            })
        });


        //取得飯店清單
        sendRequest();

        //呼叫slider Function
        priceRangeSliderInit(40000, 2000);

        //取得飯店設施
        getHotelFacility();

        //取得房間設施
        getRoomFacility();

        //選取價格區間，並發送請求
        const callback = async () => {
            const min = document.querySelector('[aria-valuenow]').getAttribute('aria-valuenow');
            const max = document.querySelector('[aria-valuemax]').getAttribute('aria-valuemax');
            filterObj.MinPrice = Number(min);
            filterObj.MaxPrice = Number(max);
            console.log(filterObj);
            scrollToTop();
            await sendRequest();
        }

        const pageNumClick = async (event, pageNum) => {

            payload.Page = pageNum;
            // const pageBtn = document.querySelectorAll('.page-btn');
            // pageBtn.forEach(btn => {
            //     if (btn.innText != pageNum) {
            //         btn.classList.remove('selected');
            //     }
            //     else {
            //         btn.classList.add('selected');
            //     }
            // })
            setPageNumStyle();
            scrollToTop();
            await sendRequest();
        }

        const pageMinus = async () => {
            if (payload.Page === 1) {
                return;
            }
            payload.Page -= 1;
            setPageNumStyle();
            scrollToTop();
            await sendRequest();
        }

        const pagePlus = async () => {
            if (payload.Page === maxPage) {
                return;
            }
            payload.Page += 1;
            setPageNumStyle();
            scrollToTop();
            await sendRequest();
        }

        let sortObj = {
            sortName: "",
            isSort: false
        };
        const sortByFun = async (event, sortBy, sortType) => {
            event.preventDefault();
            // sortObj.sortName = event.target.innerText;
            // sortObj.isSort = ture;

            const dropdownButton = event.currentTarget;
            const parentElement = dropdownButton.closest('.dropdown');
            const sortButton = parentElement.querySelector('.sort-btn');
            sortButton.innerHTML = `<i class="icon-up-down text-14 mr-10"></i> ${event.currentTarget.innerText}`;
            payload.SortBy = sortBy;
            payload.sortType = sortType;
            await sendRequest();
        }

        //篩選按鈕處理
        const sortBtn = document.querySelectorAll('.sort-btn');
        sortBtn.forEach(btn => {
            btn.addEventListener('click', (event) => {
                sortBtn.forEach(b => {
                    b.classList.remove('selected');
                });
                btn.classList.add('selected');
            })
        })

        //監聽收藏按鈕
        document.addEventListener('click', async (event) => {
            // 檢查點擊的目標元素是否為 .cardImage__wishlist 的子元素
            if (event.target.closest('.cardImage__wishlist')) {
                // 點擊 .cardImage__wishlist 元素或其內部元素
                const wishlist = event.target.closest('.cardImage__wishlist');
                const wishBtn = wishlist.querySelector('.button');
                //取得hotel id
                const hotelId = wishBtn.getAttribute('data-id');

                //如已經是收藏，再點選一次即移除
                if (wishBtn.classList.contains('wishlist-selected')) {
                    
                    //呼叫api移除收藏
                    try {
                        const res = await fetch(`/HotelApi/Collection?hotelId=${hotelId}`);
                        if (!res.ok) {

                            throw new Error('Failed to fetch data from server');
                        }
                        const resData = await res.json();
                        console.log(resData.success);
                        wishBtn.classList.remove('wishlist-selected');
                    } catch (error) {
                        console.log(error.message);
                    }
                    
                    return;
                }

               
                //呼叫api，將收藏存入資料庫
                try {
                    const res = await fetch(`https://localhost:7119/api/HotelApi/Collection?hotelId=${hotelId}`);
                    if (res.status === 401) {
                        window.location = "/CustomizedIdentity/Login/Index?returnUrl=/Customer/Hotels/ListEdit";
                    }
                    if (!res.ok) {
                        throw new Error();
                    } 
                    const resData = await res.json();
                    console.log(resData.success);
                    //加入點選後樣式
                    wishBtn.classList.add('wishlist-selected');
                } catch (error) {
                    console.log(error.message);
                }
            }
        });

    </script>
}



